<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>XOLERIC CORE</title>

    <!-- --- Open Graph: Havolada preview uchun --- -->
    <meta property="og:title" content="XOLERIC CORE">
    <meta property="og:description" content="XOLERIC CORE & visual experience">
    <meta property="og:image" content="https://xolericuz.github.io/cub.v2/preview.png">
    <meta property="og:url" content="https://xolericuz.github.io/cub.V2/">
    <meta name="twitter:card" content="summary_large_image">

    <style>
        /* --- PREMIUM STYLES --- */
        :root {
            --primary: #00ff88;
            --bg-color: #050505;
        }

        * {margin:0; padding:0; box-sizing:border-box;}
        body {
            background: var(--bg-color);
            font-family: 'Courier New', monospace;
            overflow: hidden;
            user-select: none;
            color:#fff;
        }

        #canvas-container {position:fixed; top:0; left:0; width:100%; height:100%; z-index:1;}

        /* Loader */
        #loader {
            position: fixed;
            inset:0;
            display:flex;
            flex-direction:column;
            justify-content:center;
            align-items:center;
            background:#000;
            z-index:9999;
            transition:opacity 1s ease-out;
        }
        .loader-text {
            color: var(--primary);
            font-size: 28px;
            letter-spacing: 6px;
            margin-bottom: 20px;
            text-shadow:0 0 15px var(--primary);
            animation: pulse 1.3s infinite;
        }
        .loader-bar {
            width: 250px;
            height: 3px;
            background:#111;
            overflow:hidden;
            border-radius:2px;
        }
        .loader-progress {
            width:0%;
            height:100%;
            background:var(--primary);
            box-shadow:0 0 20px var(--primary);
            transition:width 0.2s ease;
        }

        @keyframes pulse {
            0%,100%{opacity:0.5;}
            50%{opacity:1;}
        }

        /* UI Overlay */
        #ui-layer {
            position: fixed;
            inset:0;
            z-index:2;
            pointer-events:none;
            padding: 40px;
            display:flex;
            flex-direction:column;
            justify-content:space-between;
        }
        .hud-top .hud-title{
            font-size:20px;
            font-weight:bold;
            text-shadow:0 0 15px rgba(0,255,136,0.7);
        }
        .hud-top .hud-text{
            font-size:13px;
            color:rgba(255,255,255,0.6);
            margin-top:5px;
        }
        .hud-bottom .hud-text{
            font-size:12px;
            color:rgba(255,255,255,0.5);
        }

        /* Download button */
        #download-btn {
            position:fixed;
            bottom:20px;
            right:20px;
            background:var(--primary);
            color:#000;
            font-weight:bold;
            padding:10px 15px;
            border:none;
            border-radius:5px;
            cursor:pointer;
            text-decoration:none;
            box-shadow:0 0 15px var(--primary);
            transition:transform 0.2s ease, box-shadow 0.2s ease;
            z-index:5;
        }
        #download-btn:hover{
            transform:scale(1.1);
            box-shadow:0 0 25px var(--primary);
        }
    </style>

    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>
</head>
<body>

<div id="loader">
    <div class="loader-text">WELCOME TO XOLERIC</div>
    <div class="loader-bar"><div class="loader-progress" id="progress-bar"></div></div>
</div>

<div id="ui-layer">
    <div class="hud-top">
        <div class="hud-title">XOLERIC CORE</div>
        <div class="hud-text">âŽ‡</div>
    </div>
    <div class="hud-bottom">
        <div class="hud-text">xoleric</div>
        <div class="hud-text" id="fps-counter">Ï€</div>
    </div>
</div>

<a id="download-btn" href="preview.png" download>ðŸ“¥ Preview Rasmni Yuklab Olish</a>

<div id="canvas-container"></div>

<script type="module">
import * as THREE from 'three';
import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

class XolericPro {
    constructor(){
        this.container = document.getElementById('canvas-container');
        this.width = window.innerWidth;
        this.height = window.innerHeight;
        this.mouse = new THREE.Vector2();
        this.targetRotation = new THREE.Vector2();
        this.windowHalfX = this.width/2;
        this.windowHalfY = this.height/2;
        this.time = 0;
        this.hue = 0;

        this.initScene();
        this.addObjects();
        this.initPostProcessing();
        this.addMatrixBackground();
        this.addListeners();
        this.simulateLoading();
        this.animate();
    }

    simulateLoading(){
        let progress=0;
        const bar=document.getElementById('progress-bar');
        const loader=document.getElementById('loader');
        const interval=setInterval(()=>{
            progress+=Math.random()*12;
            if(progress>100) progress=100;
            bar.style.width=progress+'%';
            if(progress===100){
                clearInterval(interval);
                setTimeout(()=>{
                    loader.style.opacity='0';
                    setTimeout(()=>loader.style.display='none',1000);
                },400);
            }
        },80);
    }

    initScene(){
        this.scene=new THREE.Scene();
        this.scene.fog=new THREE.FogExp2(0x000000,0.02);

        this.camera=new THREE.PerspectiveCamera(50,this.width/this.height,0.1,100);
        this.camera.position.z=7;

        this.renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});
        this.renderer.setSize(this.width,this.height);
        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));
        this.renderer.toneMapping=THREE.ReinhardToneMapping;
        this.container.appendChild(this.renderer.domElement);

        const ambientLight=new THREE.AmbientLight(0x404040,2);
        this.scene.add(ambientLight);

        this.pointLight1=new THREE.PointLight(0xffffff,50,20);
        this.pointLight1.position.set(2,2,2);
        this.scene.add(this.pointLight1);

        this.pointLight2=new THREE.PointLight(0xffffff,50,20);
        this.pointLight2.position.set(-2,-2,2);
        this.scene.add(this.pointLight2);
    }

    addObjects(){
        // Core Cube
        const coreGeometry=new THREE.BoxGeometry(2,2,2);
        const canvas=document.createElement('canvas');
        canvas.width=512; canvas.height=512;
        this.texCtx=canvas.getContext('2d');
        this.canvasTexture=new THREE.CanvasTexture(canvas);
        this.coreMaterial=new THREE.MeshPhysicalMaterial({
            map:this.canvasTexture,
            color:0xffffff,
            metalness:0.1,
            roughness:0.05,
            transmission:0.6,
            thickness:1.5,
            emissive:0x000000,
            emissiveIntensity:1,
            clearcoat:1,
            clearcoatRoughness:0.1
        });
        this.coreCube=new THREE.Mesh(coreGeometry,this.coreMaterial);
        this.scene.add(this.coreCube);

        // Wireframe Cage
        const cageGeo=new THREE.BoxGeometry(2.5,2.5,2.5);
        const cageMat=new THREE.MeshBasicMaterial({color:0x00ff88,wireframe:true,opacity:0.3,transparent:true});
        this.cage=new THREE.Mesh(cageGeo,cageMat);
        this.scene.add(this.cage);

        // Rings
        const ringGeo=new THREE.TorusGeometry(3.5,0.02,16,100);
        const ringMat=new THREE.MeshBasicMaterial({color:0xffffff});
        this.ring1=new THREE.Mesh(ringGeo,ringMat);
        this.ring2=new THREE.Mesh(ringGeo,ringMat);
        this.ring3=new THREE.Mesh(ringGeo,ringMat);
        this.ring1.rotation.x=Math.PI/2;
        this.ring2.rotation.y=Math.PI/2;
        this.scene.add(this.ring1,this.ring2,this.ring3);

        // Particles
        const particleGeo=new THREE.BufferGeometry();
        const particleCount=300;
        const posArray=new Float32Array(particleCount*3);
        for(let i=0;i<particleCount*3;i++) posArray[i]=(Math.random()-0.5)*10;
        particleGeo.setAttribute('position',new THREE.BufferAttribute(posArray,3));
        this.particleMat=new THREE.PointsMaterial({size:0.03,color:0xffffff,transparent:true,opacity:0.8});
        this.particles=new THREE.Points(particleGeo,this.particleMat);
        this.scene.add(this.particles);
    }

    initPostProcessing(){
        const renderScene=new RenderPass(this.scene,this.camera);
        const bloom=new UnrealBloomPass(new THREE.Vector2(this.width,this.height),1.8,0.5,0.1);
        this.composer=new EffectComposer(this.renderer);
        this.composer.addPass(renderScene);
        this.composer.addPass(bloom);
    }

    addMatrixBackground(){
        this.bgCanvas=document.createElement('canvas');
        this.bgCanvas.style.position='fixed';
        this.bgCanvas.style.top='0';
        this.bgCanvas.style.left='0';
        this.bgCanvas.style.zIndex='0';
        this.bgCanvas.style.opacity='0.25';
        document.body.appendChild(this.bgCanvas);
        this.bgCtx=this.bgCanvas.getContext('2d');
        this.matrixDrops=[];
        this.resizeMatrix();
        const cols=this.bgCanvas.width/20;
        for(let i=0;i<cols;i++) this.matrixDrops[i]=1;
    }

    resizeMatrix(){this.bgCanvas.width=window.innerWidth; this.bgCanvas.height=window.innerHeight;}

    updateMatrix(){
        this.bgCtx.fillStyle='rgba(0,0,0,0.05)';
        this.bgCtx.fillRect(0,0,this.bgCanvas.width,this.bgCanvas.height);
        this.bgCtx.fillStyle=`hsl(${this.hue},100%,50%)`;
        this.bgCtx.font='15px monospace';
        const chars="XOLERIC";
        for(let i=0;i<this.matrixDrops.length;i++){
            const text=chars[Math.floor(Math.random()*chars.length)];
            this.bgCtx.fillText(text,i*20,this.matrixDrops[i]*20);
            if(this.matrixDrops[i]*20>this.bgCanvas.height && Math.random()>0.975) this.matrixDrops[i]=0;
            this.matrixDrops[i]++;
        }
    }

    updateTexture(time){
        this.texCtx.fillStyle='#000'; this.texCtx.fillRect(0,0,512,512);
        this.texCtx.lineWidth=10; this.texCtx.strokeStyle=`hsl(${this.hue},100%,50%)`;
        this.texCtx.strokeRect(20,20,472,472);
        this.texCtx.font='bold 80px Courier New'; this.texCtx.textAlign='center'; this.texCtx.textBaseline='middle';
        this.texCtx.fillStyle=`hsl(${this.hue},100%,70%)`;
        const pulse=Math.sin(time*2)*20;
        this.texCtx.save(); this.texCtx.translate(256,256); this.texCtx.rotate(Math.sin(time)*0.2);
        this.texCtx.fillText("XOLERIC",0,-50+pulse);
        this.texCtx.font='40px Courier New'; this.texCtx.fillText("core",0,50); this.texCtx.restore();
        this.canvasTexture.needsUpdate=true;
    }

    addListeners(){
        window.addEventListener('resize',()=>{this.width=window.innerWidth;this.height=window.innerHeight;
            this.windowHalfX=this.width/2; this.windowHalfY=this.height/2;
            this.camera.aspect=this.width/this.height; this.camera.updateProjectionMatrix();
            this.renderer.setSize(this.width,this.height); this.composer.setSize(this.width,this.height);
            this.resizeMatrix();});
        document.addEventListener('mousemove',e=>{this.mouse.x=(e.clientX-this.windowHalfX)*0.001; this.mouse.y=(e.clientY-this.windowHalfY)*0.001;});
        document.addEventListener('touchmove',e=>{if(e.touches.length>0){e.preventDefault(); this.mouse.x=(e.touches[0].clientX-this.windowHalfX)*0.002; this.mouse.y=(e.touches[0].clientY-this.windowHalfY)*0.002;}},{passive:false});
    }

    animate(){
        requestAnimationFrame(this.animate.bind(this));
        this.time+=0.01; this.hue=(this.hue+0.5)%360;

        const color=new THREE.Color(`hsl(${this.hue},100%,50%)`);
        this.cage.material.color=color; this.particleMat.color=color;
        this.coreMaterial.emissive=new THREE.Color(`hsl(${this.hue},100%,20%)`);
        this.pointLight1.color=color; this.pointLight2.color=new THREE.Color(`hsl(${(this.hue+180)%360},100%,50%)`);

        this.targetRotation.x=this.mouse.y*5; this.targetRotation.y=this.mouse.x*5;
        this.coreCube.rotation.x+=(this.targetRotation.x-this.coreCube.rotation.x)*0.05;
        this.coreCube.rotation.y+=(this.targetRotation.y-this.coreCube.rotation.y)*0.05;
        this.coreCube.rotation.z+=0.005;

        this.cage.rotation.copy(this.coreCube.rotation); this.cage.rotation.x*=-1;
        this.ring1.rotation.x+=0.02; this.ring1.rotation.y+=0.01;
        this.ring2.rotation.y-=0.02; this.ring3.rotation.z+=0.01;
        this.particles.rotation.y=this.time*0.1;

        this.updateTexture(this.time);
        this.updateMatrix();
        this.composer.render();
    }
}

new Xoleric();
</script>

</body>
</html>
